datamart:
  mappings:
    properties:
      id:
        type: keyword
      name:
        type: text
      description:
        type: text
      date:
        type: date
      license:
        type: keyword
      sample:
        type: text
        index: false
      source:
        type: keyword
      size:
        type: long
      nb_rows:
        type: long
      nb_profiled_rows:
        type: long
        index: false
      version:
        type: keyword
        index: false
      # 'columns' is a nested field, we want
      # to query individual columns
      columns:
        type: nested
        properties:
          name:
            type: text
            # the following is needed for
            # the fuzzy query in union search
            fields:
              raw:
                type: keyword
          structural_type:
            type: keyword
          semantic_types:
            type: keyword
          missing_values_ratio:
            type: float
          unclean_values_ratio:
            type: float
          num_distinct_values:
            type: long
          # Numerical summaries
          mean:
            type: float
          stddev:
            type: float
          # we want to query individual numerical ranges
          coverage:
            type: nested
            properties:
              range:
                type: double_range
          plot:
            type: object
            enabled: false
      spatial_coverage:
        type: nested
        properties:
          lat:
            type: text
          lon:
            type: text
          address:
            type: text
          # we want to query individual spatial ranges
          ranges:
            type: nested
            properties:
              range:
                type: geo_shape
      materialize:
        properties:
          identifier:
            type: keyword
          date:
            type: date
          direct_url:
            type: keyword
            index: false
datamart_columns:
  mappings:
    properties:
      dataset_id:
        type: keyword
      dataset_name:
        type: text
      dataset_description:
        type: text
      dataset_date:
        type: date
      dataset_license:
        type: keyword
      dataset_source:
        type: keyword
      dataset_size:
        type: long
      dataset_nb_rows:
        type: long
      dataset_nb_profiled_rows:
        type: long
        index: false
      dataset_version:
        type: keyword
        index: false
      name:
        type: text
        # the following is needed for
        # the fuzzy query for numerical attributes
        # and for Lazo queries
        fields:
          raw:
            type: keyword
      index:
        type: integer
      structural_type:
        type: keyword
      semantic_types:
        type: keyword
      missing_values_ratio:
        type: float
      unclean_values_ratio:
        type: float
      num_distinct_values:
        type: long
      # Numerical summaries
      mean:
        type: float
      stddev:
        type: float
      # numerical ranges
      coverage:
        type: nested
        properties:
          range:
            type: double_range
          # the following is needed so we can access this information
          #   inside the script, and this is not available for type
          #   'double_range'
          gte:
            type: double
          lte:
            type: double
datamart_spatial_coverage:
  mappings:
    properties:
      dataset_id:
        type: keyword
      dataset_name:
        type: text
      dataset_description:
        type: text
      dataset_date:
        type: date
      dataset_license:
        type: keyword
      dataset_source:
        type: keyword
      dataset_size:
        type: long
      dataset_nb_rows:
        type: long
      dataset_nb_profiled_rows:
        type: long
        index: false
      dataset_version:
        type: keyword
        index: false
      name:
        type: text
      lat:
        type: text
      lon:
        type: text
      lat_index:
        type: integer
      lon_index:
        type: integer
      ranges:
        type: nested
        properties:
          range:
            type: geo_shape
          # the following is needed so we can access this information
          #   inside the script, and this is not available for type
          #   'geo_shape'
          min_lon:
            type: double
          max_lat:
            type: double
          max_lon:
            type: double
          min_lat:
            type: double
