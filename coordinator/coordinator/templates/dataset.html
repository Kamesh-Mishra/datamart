{% extends "base.html" %}
{% set active_page = "dataset" %}

{% block contents %}
<h1>Dataset: {{ dataset_id }}</h1>

<p><a href="{{ query_host }}/download/{{ dataset_id }}">Download: CSV</a>, <a href="{{ query_host }}/download/{{ dataset_id }}?format=d3m">D3M</a> ({{ size }})</p>

{% macro meta_table(m) -%}
  <table class="table json">
    <tbody>
      {%- for row in json_table(m) %}
      <tr>
        {%- for rowspan, cell in row %}
          {%- if loop.last %}
          <td colspan="{{ 100 - row|length }}">{{ cell }}</td>
          {%- else %}
          <th rowspan="{{ rowspan}}">{{ cell }}</th>
          {%- endif %}
        {%- endfor %}
      </tr>
      {%- endfor %}
    </tbody>
  </table>
{%- endmacro %}

<h2>Metadata</h2>
<p>This is the metadata that was recorded during profiling.</p>
{{ meta_table(metadata) }}

<h2>Materialization info</h2>
<p>This was recorded by the discovery plugin <span style="font-family: monospace;">{{ discoverer }}</span></p>
{{ meta_table(materialize) }}
{% endblock %}
