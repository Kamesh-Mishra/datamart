{% extends "base.html" %}
{% set active_page = "search" %}

{% block contents %}
<section class="jumbotron">
  <div class="container">
    <form id="search-form">
      {{ xsrf_form_html() }}

      <h1>Search Auctus</h1>

      <hr align="left">
      <h3>Data (CSV file)</h3>

      <div class="form-row">
        <div class="form-group col-md-8">
         <input type="file" class="form-control-file" name="file" id="file" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-8">
          <label for="search_columns">Columns for Join or Union:</label>
          <input class="form-control" id="search_columns" />
        </div>
      </div>

      <hr align="left">
      <h3>Query</h3>

      <div class="form-row">
        <div class="form-group col-md-8">
          <label for="keywords">Keywords:</label>
          <input class="form-control" id="keywords" autofocus />
        </div>
      </div>

      <h4>Variables</h4>

      <div id="variables"></div>
      <div class="form-row">
        <select id="select-required">
          <option value="temporal">Temporal</option>
          <option value="geospatial">Geospatial</option>
        </select>
        <button class="btn btn-secondary btn-sm ml-3" type="button"
                onclick="variableChange('select-required');">Add</button>
      </div>

      <script type="text/x-template" id="variable-temporal-template">
<h5>Temporal Information</h5>
<div class="form-row">
  <div class="form-group col-md-8">
    <label for="start-__index__">From:</label>
    <input class="form-control" id="start-__index__">
  </div>
</div>
<div class="form-row">
  <div class="form-group col-md-8">
    <label for="end-__index__">To:</label>
    <input class="form-control" id="end-__index__">
  </div>
</div>
      </script>

      <script type="text/x-template" id="variable-geospatial-template">
<h5>Geospatial Bounds</h5>
<div class="d-flex align-items-center">
  <p id="bounds-__index__" class="ml-auto mb-2 text-right" style="font-size: 11px;"> </p>
</div>
<div id="map-__index__" class="map mb-1"></div>
<p class="mb-3" style="font-size: 11px;">Right-click to clear selection.</p>
      </script>

      <p></p>

      <div class="form-group row justify-content-center mt-4">
        <button class="btn btn-lg btn-primary btn-block col-md-8" type="submit">Go</button>
      </div>
    </form>
  </div>
</section>

<div style="display: none;" class="alert alert-danger" role="alert" id="search-error">
  No results
</div>

<div class="album py-5 bg-light">
  <div class="container">
    <div id="processing" style="display:none;">
      <div class="d-flex justify-content-center align-items-center mb-5">
        <div class="loader"></div>
        <div class="ml-3">
          <p class="mb-0 font-weight-bold font-italic">Processing... Please wait!</p>
        </div>
      </div>
    </div>
    <div class="row" id="results"></div>
  </div>
</div>

<script type="text/javascript">
var QUERY_HOST = '{{ query_host | safe }}';
</script>
<script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
<script type="text/javascript" src="{{ static_url('js/search.js') }}"></script>
{% endblock %}
