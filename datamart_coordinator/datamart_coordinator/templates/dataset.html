{% extends "base.html" %}
{% set active_page = "index" %}

{% block contents %}
<h1>Dataset: {{ dataset_id }}</h1>

{% macro meta_table(m) -%}
  {% if isdict(m) %}
    <table class="table json">
      <tbody>
        {% for k, v in m.items() %}
        <tr>
          <th scope="row">{{ k }}</th>
          <td>
            {{ meta_table(v) }}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% elif islist(m) %}

    {% if m %}
      <table class="table json">
        <tbody>
          {% for e in m %}
          <tr>
            <th scope="row">{{ loop.index0 }}</th>
            <td>
              {{ meta_table(e) }}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      []
    {% endif %}
  {% else %}
    {{ m }}
  {% endif %}
{%- endmacro %}

<h2>Metadata</h2>
<p>This is the metadata that was recorded during ingestion.</p>
{{ meta_table(ingest_meta) }}

<h2>Discovery info</h2>
<p>This was recorded by the discovery plugin <span style="font-family: monospace;">{{ discoverer }}</span></p>
{{ meta_table(discovery_meta) }}
{% endblock %}
